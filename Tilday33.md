# 타임리프(Thymeleaf) 뷰 렌더링 및 템플릿 (2026-01-24)

## 1. 타임리프(Thymeleaf)

### 1. 타임리프의 주요 특징
* **Natural Templates:** 서버 없이 HTML 파일을 브라우저에서 열어도 정상적인 레이아웃이 유지되며, 서버 실행 시에만 `th:` 속성이 동적 데이터로 대체됨.
* **Thymeleaf Namespace:** `<html>` 태그에 `xmlns:th="http://www.thymeleaf.org"`를 선언하여 타임리프 전용 속성을 정의하고 엔진이 해석하도록 함.
* **캐시 비활성화:** 개발 단계에서는 `spring.thymeleaf.cache=false` 설정을 통해 템플릿 수정 후 새로고침만으로 즉시 결과를 확인함.

### 2. 타임리프의 3대 주석 (Comments)
* **HTML 주석 (``):** 표준 주석으로 브라우저의 소스 보기에서 노출됨.
* **파서 주석 (``):** 렌더링 시 타임리프 엔진에 의해 완전히 제거되어 클라이언트에게 전달되지 않음.
* **프로토타입 주석 (``):** 정적 파일에선 주석이지만, 서버 렌더링 시에는 내부 내용이 활성화되어 출력됨.

---

## 2. 표현식(Expressions)과 데이터 출력 제어

### 1. 5가지 표준 표현식 문법
* **변수 표현식 (`${...}`):** 모델에 담긴 객체나 컨텍스트 변수에 접근함.
* **선택 변수 표현식 (`*{...}`):** `th:object`로 지정된 객체를 기준으로 하위 속성에 간결하게 접근함.
* **링크 URL 표현식 (`@{...}`):** 컨텍스트 패스를 포함하여 스마트한 경로를 생성함 (`/board/read(id=${id})` 등).
* **메시지 표현식 (`#{...}`):** 외부 메시지 소스(`properties`) 파일에서 다국어나 설정 문자열을 읽어옴.
* **리터럴 치환 (`|...|`):** 변수와 문자열 결합 시 `+` 연산 없이 편리하게 작성함 (`|작성자: ${writer}|`).

### 2. 출력 및 속성 제어
* **th:text / th:utext:** 특수 문자를 이스케이프 처리하여 안전하게 출력하거나, HTML 태그를 있는 그대로 해석하여 출력함.
* **th:classappend:** 기존 HTML 클래스를 유지한 상태에서 특정 클래스만 조건부로 추가하여 스타일을 조절함.
* **인라인 출력:** 태그 밖에서 `[[...]]`(text) 또는 `[(...)]`(utext)를 사용하여 데이터를 직접 렌더링함.

---

## 3. 조건문, 반복문 및 유틸리티 객체 활용

### 1. 로직 제어 및 반복
* **th:if / th:unless:** 조건의 참/거짓 여부에 따라 해당 요소의 렌더링 여부를 결정함.
* **th:switch / th:case:** 다중 분기 처리를 수행하며, `*`를 통해 default 케이스를 지정함.
* **th:each:** 컬렉션을 순회하며 요소를 반복 생성함. 상태 변수(`status`)를 통해 인덱스, 카운트, 홀짝 등 상태 정보를 활용함.
* **th:block:** 마크업 구조를 해치지 않고 타임리프 속성만 적용하고 싶을 때 사용하는 유일한 타임리프 전용 태그임.

### 2. 강력한 유틸리티 객체 (Utility Objects)
* **#temporals:** Java 8 `LocalDateTime` 날짜 및 시간 데이터를 원하는 패턴으로 포맷팅함 (`#temporals.format(...)`).
* **#strings:** 문자열 조작, 빈 값 체크, 첫 글자 대문자화(`capitalize`) 등 다양한 기능을 제공함.
* **#numbers:** 숫자 포맷팅 및 화폐 단위, 천 단위 콤마 등을 처리함.

---

## 게시판 등록/수정 폼 통합

### 1. 컨트롤러 설계 및 데이터 흐름
* **GET /board/write:** `action="write"`와 제목 정보를 모델에 담아 전송하여 빈 입력 양식을 노출함.
* **GET /board/update:** 특정 ID로 게시물을 조회하여 `PostDTO`를 모델에 담고, `action="update"` 정보를 전달함.
* **PRG 패턴:** 상태 변경 요청(POST) 처리 후 `redirect`를 통해 새로고침에 의한 중복 등록을 방지함.

### 2. 통합 템플릿(`write.html`) 
* **동적 액션 설정:** `th:action="@{/board/{act}(act=${action})}"`를 통해 상황에 맞는 URL로 요청을 처리함.
* **조건부 히든 필드:** `th:if="${postDTO != null}"`을 활용하여 수정 시에만 ID를 포함하는 히든 필드를 생성함.
* **데이터 바인딩 및 기본값:** 조건 연산자를 사용하여 등록 시에는 빈 칸을, 수정 시에는 기존 데이터를 폼에 자동으로 채워줌.
* **동적 버튼 라벨:** `#strings.capitalize(action)`를 활용하여 버튼 텍스트를 "Write" 또는 "Update"로 자동 변경함.